<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MÃ¼nchen Stadtrat Analytics</title>
    <link rel="stylesheet" href="../static/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  </head>

  <body>

    <!-- Hero Section -->
    <header class="hero">
      <div class="hero-overlay">
        <div class="language-switcher">
          <button class="lang-btn" data-lang="de">ðŸ‡©ðŸ‡ª DE</button>
          <button class="lang-btn" data-lang="en">ðŸ‡¬ðŸ‡§ EN</button>
        </div>
        <div class="hero-content">
          <h1 class="hero-title" data-i18n="hero.title">What does Munich work on?</h1>
          <p class="hero-subtitle" data-i18n="hero.subtitle">Visualisierung und Analyse von StadtratsantrÃ¤gen</p>
        </div>
      </div>
    </header>

    <!-- Main Container -->
    <main class="container">
      
      <!-- Search Section -->
      <section class="search-section">
        <div class="section-header">
          <h2 class="section-title" data-i18n="search.title">Themen durchsuchen</h2>
          <p class="section-description" data-i18n="search.description">Erkunden Sie die hÃ¤ufigsten Themen in MÃ¼nchner StadtratsantrÃ¤gen oder suchen Sie nach einem spezifischen Stichwort</p>
        </div>

        <!-- Quick Filter Tags -->
        <div class="quick-filters">
          <label class="filter-label" data-i18n="search.popular">Beliebte Themen:</label>
          <!-- <p style="font-size: 12px; color: #bbb;" data-i18n="search.popular.note"> (Es werden hier die am meisten vorkommenden Keywords mit Hilfe von spacy gefiltert, gecached und angezeigt, exclusive der in keyword_extractor.py ausgeschlossenen stop words) </p> -->

          <div class="example-searches" id="example-searches" data-count="16">
            <span class="loading-indicator" data-i18n="loading.indicator">Wird geladen...</span>
          </div>
        </div>

        <!-- Search Input -->
        <div class="search-bar">
          <div class="search-input-wrapper">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
              <path d="M9 17C13.4183 17 17 13.4183 17 9C17 4.58172 13.4183 1 9 1C4.58172 1 1 4.58172 1 9C1 13.4183 4.58172 17 9 17Z" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <path d="M19 19L14.65 14.65" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <input
              type="text"
              id="searchInput"
              data-i18n-placeholder="search.placeholder"
              placeholder="Suchbegriff eingeben..."
              autocomplete="off"
            />
          </div>
          <button id="searchBtn" class="search-btn">
            <span data-i18n="search.button">Suchen</span>
          </button>
        </div>

         <!-- Expanded Search Terms Display -->
        <div id="expanded-terms-display" class="expanded-terms-display">
          <!-- Will be populated by JavaScript -->
        </div>

        <!-- Typ Filter -->
        <div class="typ-filter-section">
          <div class="typ-filter-header" id="typFilterToggle">
            <label class="filter-label" data-i18n="filter.type.label">Antragstyp filtern:</label>
            <button class="toggle-btn" data-i18n-aria="filter.toggle.aria" aria-label="Filter ein-/ausblenden">
              <svg class="toggle-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <div id="typ-filter-content" class="typ-filter-content">
            <div id="typ-filter-checkboxes" class="typ-checkboxes">
              <!-- Will be populated by JavaScript -->
              <span class="loading-indicator" data-i18n="loading.indicator">Wird geladen...</span>
            </div>
          </div>
        </div>

        <!-- Date Range Filter -->
        <div class="date-filter-section">
          <div class="date-filter-header" id="dateFilterToggle">
            <label class="filter-label" data-i18n="filter.date.label">Zeitraum filtern:</label>
            <button class="toggle-btn">
              <svg class="toggle-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">
                <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <div id="date-filter-content" class="date-filter-content">
            <div class="date-inputs">
              <div class="date-input-group">
                <label for="dateFrom" data-i18n="filter.date.from">Von:</label>
                <input type="date" id="dateFrom" />
              </div>
              <div class="date-input-group">
                <label for="dateTo" data-i18n="filter.date.to">Bis:</label>
                <input type="date" id="dateTo" />
              </div>
              <button id="clearDateFilter" class="clear-btn" data-i18n="filter.date.clear">
                ZurÃ¼cksetzen
              </button>
            </div>
          </div>
        </div>

        <!-- Date Range Info -->
        <div id="date-range-display" class="date-range-info">
          <!-- Will be populated by JavaScript -->
        </div>
      </section>

      <!-- Visualizations -->
      <section class="visualizations" id="visualization">
        
        <!-- KPI Cards -->
        <div id="viz-kpi" class="kpi-section"></div>

        <!-- Charts Grid -->
        <div class="charts-grid">
          <div id="viz-trend" class="chart-card"></div>
          <div id="viz-fraktionen" class="chart-card"></div>
          <div id="viz-fraktionen-share" class="chart-card"></div>
          <div id="viz-topdocs" class="chart-card"></div>
          <div id="viz-metrics-chart" class="chart-card"></div>
        </div>
      </section>

    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="footer-content">
        <p data-i18n="footer.copyright">&copy; 2026 Elena Zimmermann, Anna Labchir, Matthias Staritz, Tobias Pfeifle</p>
        <div class="footer-links">
          <a href="{{ url_for('legal') }}#impressum" data-i18n="footer.imprint">Impressum</a>
          <a href="{{ url_for('legal') }}#datenschutz" data-i18n="footer.privacy">Datenschutzerkl&auml;rung</a>
          <a href="{{ url_for('legal') }}#haftung" data-i18n="footer.disclaimer">Haftungsausschluss</a>
          <a href="{{ url_for('methodik') }}" data-i18n="footer.methodology">Methodik</a>
        </div>
      </div>
    </footer>

    <!-- Load D3.js library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>

    <!-- Load language switcher -->
    <script type="module" src="../static/language-switcher.js"></script>

    <!-- Load keyword loader script -->
    <script type="module" src="../static/keyword-loader.js"></script>

    <!-- Load main application with ES modules -->
    <script type="module" src="../static/js-viz/main.js"></script>
  </body>
</html>
